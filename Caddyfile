# O Caddy irá escutar na porta 80 (HTTP)
:80 {
    # Define o diretório raiz onde os ficheiros do frontend estão
    root * /srv/app

    # Tenta servir o ficheiro pedido (ex: /assets/index.js)
    # Se não encontrar, serve o index.html (para o React Router funcionar)
    try_files {path} /index.html

    # Redireciona os pedidos de API (ex: /api/...) para o nosso container do backend (api:8080)
    reverse_proxy /api/* api:8080

    # Ativa a compressão (gzip) para servir os ficheiros mais rápido
    encode gzip

    # Diz ao Caddy para servir os ficheiros estáticos
    file_server
}